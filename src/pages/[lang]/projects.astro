---
import HorizontalCard from "../../components/HorizontalCard.astro";
import { languages } from "../../i18n/ui";
import { getLangFromUrl, useTranslations } from "../../i18n/utils";
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getProjectCards } from "../../selectors";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

export async function getStaticPaths() {
  const routes = Object.entries(languages).map(([lang, _]) => ({
    params: { lang },
  }));

  return [...routes];
}

const cards = await getProjectCards(lang);
---

<BaseLayout title="Projects">
  <div>
    <div class="text-3xl w-full font-bold mb-5">{t("projects.title")}</div>
  </div>

  {cards.map((card) => <HorizontalCard {...card} />)}
</BaseLayout>
